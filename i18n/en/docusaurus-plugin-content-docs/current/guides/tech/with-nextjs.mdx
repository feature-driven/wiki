---
sidebar_position: 10
---
# Usage with NextJS

NextJS works well with FSD, but conflicts arise due to the differences between NextJS project structure requirements and FSD principles.
Namely, in two points: 

- File routing in the `pages` layer
- The conflict or absence of the `app` layer in NextJS

## Conflict between FSD and NextJS on `pages` layer {#pages-conflict}

NextJS suggests using the `pages` folder to define the application's routes. By default, NextJS expects the files in the `pages` folder to correspond to specific URL addresses.
This routing mechanism **does not** align with the concept of FSD, as in such a routing mechanism it is not possible to observe the flat slice structure.

### Moving the `pages` folder of NextJS to the root folder of the project (recommended)

The approach is to move the `pages` folder of NextJS to the root folder of the project, while preserving the FSD
project structure inside the `src` folder and import the pages of FSD to the `pages` folder of NextJS.

```sh
├── pages              # NextJS pages folder
├── src
│   ├── app
│   ├── entities
│   ├── features  
│   ├── pages          # FSD pages folder
│   ├── shared
│   ├── widgets
```

### Renaming the `pages` layer within the FSD structure

Another way to solve the conflict issue is to rename the `pages` layer within the FSD structure to avoid conflicts
with the `pages` folder in NextJS.
You should rename the `pages` layer within FSD to `views`.
This way, the project structure within the `src` folder will be preserved without conflicting with NextJS requirements.

```sh
├── app
├── entities
├── features  
├── pages              # NextJS pages folder
├── views              # Renamed FSD pages folder
├── shared
├── widgets             
```

__Both conflict resolution approaches also involve the use of [grouping](https://nextjs.org/docs/app/building-your-application/routing/route-groups) when there are a large number of pages.__

## The absence of the `app` folder in NextJS {#app-absence}

There is no explicit `app` folder in the NextJS below version 13, instead, NextJS provides the `_app.tsx` file,
which plays the role of a common wrapping component for all application pages.

### Importing app functionality to `pages/_app.tsx` file

To solve the problem you should create a component inside `app` layer to import it inside `pages/_app.tsx` file for NextJS to work with it.
For example, we have `App` component:

```tsx
// app/providers/index.tsx

const App = ({ Component, pageProps }: AppProps) => {
  return (
    <Provider1>
      <Provider2>
        <BaseLayout>
            <Component {...pageProps} />
        </BaseLayout>
      </Provider2>
    </Provider1>
  );
};

export default App;
```
Need to import created `App` component and global styles of the project to `pages/_app.tsx` like this:

```tsx
// pages/_app.tsx

import 'app/styles/index.scss'

export { default } from 'app';
```

## Dealing with App Router {#app-router}

App Router has become stable in NextJS 13.4. App Router allow to use `app` folder for routing instead of `pages` folder.
To comply with the FSD principles, you should deal with the NextJS `app` folder in the same way as it is recommended 
to fix the conflict with the `pages` folder of NextJS.

The approach is to move the `app` folder of NextJS to the root folder of the project, while preserving the FSD
project structure inside the `src` folder and import the pages of FSD to the `app` folder of NextJS.

```sh
├── app                # NextJS app folder
├── src
│   ├── app            # FSD app folder
│   ├── entities
│   ├── features  
│   ├── pages
│   ├── shared
│   ├── widgets
```

__This approach also involve the use of [grouping](https://nextjs.org/docs/app/building-your-application/routing/route-groups) when there are a large number of pages.__

## See also {#see-also}

- [(Thread) About the pages directory in NextJS](https://t.me/feature_sliced/3623)
